# ржЖрж▓-рж╣рж╛ржорж░рж╛ ржмрзНрж░рзЛржХрж╛рж░рзЗржЬ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ рж╕рж┐рж╕рзНржЯрзЗржо

## 1. ржнрзВржорж┐ржХрж╛
### 1.1 ржЙржжрзНржжрзЗрж╢рзНржп
ржПржЗ ржбржХрзБржорзЗржирзНржЯржЯрж┐рж░ ржЙржжрзНржжрзЗрж╢рзНржп рж╣рж▓рзЛ ржЖрж▓-рж╣рж╛ржорж░рж╛ ржмрзНрж░рзЛржХрж╛рж░рзЗржЬ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ (ржкрж░рзЗ "рж╕рж┐рж╕рзНржЯрзЗржо") рж╕ржлржЯржУржпрж╝рзНржпрж╛рж░ рж░рж┐ржХрзЛржпрж╝рж╛рж░ржорзЗржирзНржЯ рж╕рзНржкрзЗрж╕рж┐ржлрж┐ржХрзЗрж╢ржи (SRS) ржЙржкрж╕рзНржерж╛ржкржи ржХрж░рж╛ред ржбржХрзБржорзЗржирзНржЯржЯрж┐ ржкрзНрж░ржХрж▓рзНржк ржмрзНржпржмрж╕рзНржерж╛ржкржХ, ржбрзЗржнрзЗрж▓ржкрж╛рж░, ржкрж░рзАржХрзНрж╖ржХ ржПржмржВ ржЕржирзНржпрж╛ржирзНржп ржЕржВрж╢рзАржЬржиржХрзЗ ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ ржлрж╛ржВрж╢ржирж╛рж▓ ржУ ржиржи-ржлрж╛ржВрж╢ржирж╛рж▓ ржЪрж╛рж╣рж┐ржжрж╛ рж╕ржорзНржкрж░рзНржХрзЗ рж╕рзНржкрж╖рзНржЯ ржирж┐рж░рзНржжрзЗрж╢ржирж╛ ржжрзЗржмрзЗред

### 1.2 ржкрж░рж┐ржзрж┐
рж╕рж┐рж╕рзНржЯрзЗржоржЯрж┐ ржПржХржЯрж┐ API-ржкрзНрж░ржержо Laravel ржнрж┐рждрзНрждрж┐ржХ ржмрзНржпрж╛ржХржПржирзНржб ржпрж╛ ржПржЬрзЗржирзНржЯ ржУ ржмрзНрж░рж╛ржЮрзНржЪ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ, ржмрж┐ржХрзНрж░ржпрж╝ ржЕрж░рзНржбрж╛рж░, ржЗржирж╕рзНржЯрж▓ржорзЗржирзНржЯ, ржкрзЗржорзЗржирзНржЯ, ржХржорж┐рж╢ржи, рж░тАНрзНржпрж╛ржЩрзНржХ ржЗржирж╕рзЗржиржЯрж┐ржн, ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯрж┐ржВ рж▓рзЗржЬрж╛рж░, ржбржХрзБржорзЗржирзНржЯ рж╕рзНржЯрзЛрж░рзЗржЬ ржПржмржВ рж░рж┐ржкрзЛрж░рзНржЯрж┐ржВ ржкрж░рж┐ржЪрж╛рж▓ржирж╛ ржХрж░рзЗред ржлрзНрж░ржирзНржЯржПржирзНржб рж╣рж┐рж╕рзЗржмрзЗ React ржПржмржВ ржорзЛржмрж╛ржЗрж▓рзЗрж░ ржЬржирзНржп Android ржЕрзНржпрж╛ржк ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржкрж░рж┐ржХрж▓рзНржкржирж╛ рж░ржпрж╝рзЗржЫрзЗредуАРF:README.mdтАаL1-L20уАСуАРF:README.mdтАаL35-L53уАС

### 1.3 рж╕ржВржЬрзНржЮрж╛, ржЕрзНржпрж╛ржХрзНрж░рзЛржирж┐ржо ржУ рж╕ржВржХрзНрж╖рж┐ржкрзНржд рж░рзВржк
- API: Application Programming Interface
- RBAC: Role-Based Access Control
- JWT: JSON Web Token (Laravel Sanctum ржЯрзЛржХрзЗржи рж╣рж┐рж╕рзЗржмрзЗ ржмрзНржпржмрж╣рзГржд)
- ME/MM/тАж/HD: ржорж╛рж░рзНржХрзЗржЯрж┐ржВ ржЯрж┐ржорзЗрж░ рж░тАНрзНржпрж╛ржЩрзНржХ ржХрзЛржб
- SRS: Software Requirements Specification
- OTP: One-Time Password

### 1.4 рж░рзЗржлрж╛рж░рзЗржирзНрж╕
- ржкрзНрж░ржХрж▓рзНржк README
- Laravel 10 ржбржХрзБржорзЗржирзНржЯрзЗрж╢ржи
- Swagger ржбржХрзБржорзЗржирзНржЯрзЗрж╢ржи ржЬрзЗржирж╛рж░рзЗрж╢ржи ржирж┐рж░рзНржжрзЗрж╢ржирж╛

## 2. рж╕рж╛ржоржЧрзНрж░рж┐ржХ ржмрж┐ржмрж░ржг
### 2.1 ржкржгрзНржпрзЗрж░ ржжрзГрж╖рзНржЯрж┐ржнржЩрзНржЧрж┐
рж╕рж┐рж╕рзНржЯрзЗржоржЯрж┐ ржПржХржЯрж┐ ржорж╛рж▓рзНржЯрж┐-ржЯрж┐ржпрж╝рж╛рж░, API-ржкрзНрж░ржержо ржмрзНржпрж╛ржХржПржирзНржб ржпрж╛ React ржУ Android ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯржХрзЗ JSON API ржкрзНрж░ржжрж╛ржи ржХрж░рзЗред рж░рж╛ржЙржЯрж╕ржорзВрж╣ `routes/api.php` ржлрж╛ржЗрж▓рзЗ рж╕ржВржЬрзНржЮрж╛ржпрж╝рж┐ржд ржПржмржВ Sanctum ржнрж┐рждрзНрждрж┐ржХ ржЯрзЛржХрзЗржи ржЕржерзЗржиржЯрж┐ржХрзЗрж╢ржи ржкрзНрж░ржпрж╝рзЛржЧ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗредуАРF:routes/api.phpтАаL1-L79уАС

### 2.2 ржмрзНржпржмрж╕рж╛ржпрж╝рж┐ржХ ржкрзНрж░рзЗржХрзНрж╖рж┐ржд
ржЖрж▓-рж╣рж╛ржорж░рж╛ ржмрзНрж░рзЛржХрж╛рж░рзЗржЬ ржПржХржЯрж┐ рж╕рзЗрж▓рж╕ ржУ ржХржорж┐рж╢ржи ржбрзНрж░рж╛ржЗржнржи ржмрзНржпржмрж╕рж╛ ржпрзЗржЦрж╛ржирзЗ ржПржЬрзЗржирзНржЯрж░рж╛ ржЬржорж┐, ржкржгрзНржп ржУ рж╕рж╛рж░рзНржнрж┐рж╕ ржмрж┐ржХрзНрж░рж┐ ржХрж░рзЗ ржПржмржВ ржбрж╛ржЙржи ржкрзЗржорзЗржирзНржЯ ржУ ржХрж┐рж╕рзНрждрж┐рж░ ржЙржкрж░ ржХржорж┐рж╢ржи ржЕрж░рзНржЬржи ржХрж░рзЗред рж╕рж┐рж╕рзНржЯрзЗржоржЯрж┐ ржПржЬрзЗржирзНржЯ/ржмрзНрж░рж╛ржЮрзНржЪ рж╣рж╛ржпрж╝рж╛рж░рж╛рж░рзНржХрж┐, рж░тАНрзНржпрж╛ржЩрзНржХ ржЙржирзНржиржпрж╝ржи ржУ ржЗржирж╕рзЗржиржЯрж┐ржн ржмрж┐рждрж░ржгржХрзЗ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ ржХрж░рзЗред

### 2.3 ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА рж╢рзНрж░рзЗржгрж┐ ржУ ржмрзИрж╢рж┐рж╖рзНржЯрзНржп
User ржоржбрзЗрж▓рзЗ ржирж┐ржЪрзЗрж░ рж░рзЛрж▓рж╕ржорзВрж╣ рж╕ржорж░рзНржерж┐ржд: Admin, Branch Admin, Agent, Agent Admin, Employee, Owner, Director ржПржмржВ Customerред ржкрзНрж░рждрж┐ржЯрж┐ рж░рзЛрж▓рзЗрж░ ржЕржзрж┐ржХрж╛рж░ Spatie Permission ржкрзНржпрж╛ржХрзЗржЬрзЗрж░ ржорж╛ржзрзНржпржорзЗ ржХржиржлрж┐ржЧрж╛рж░ржпрзЛржЧрзНржпредуАРF:app/Models/User.phpтАаL17-L55уАС

### 2.4 ржЕржкрж╛рж░рзЗрж╢ржирж╛рж▓ ржкрж░рж┐ржмрзЗрж╢
- Laravel 10, PHP 8.1+
- MySQL ржмрж╛ рж╕рж╛ржоржЮрзНржЬрж╕рзНржпржкрзВрж░рзНржг RDBMS
- Redis рж╕рж╣ Queue/Horizon
- Storage ржбрж┐рж╕рзНржХ (рж▓рзЛржХрж╛рж▓/S3)
- SSLCommerz ржкрзЗржорзЗржирзНржЯ ржЧрзЗржЯржУржпрж╝рзЗ ржЗржирзНржЯрж┐ржЧрзНрж░рзЗрж╢ржи (Sandbox/Production)

### 2.5 ржбрж┐ржЬрж╛ржЗржи ржУ ржмрж╛рж╕рзНрждржмрж╛ржпрж╝ржи рж╕рзАржорж╛ржмржжрзНржзрждрж╛
- Sanctum ржЯрзЛржХрзЗржирзЗрж░ ржорж╛ржзрзНржпржорзЗ API ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕
- Spatie Activity Log ржжрзНржмрж╛рж░рж╛ ржЕржбрж┐ржЯ ржЯрзНрж░рзЗржЗрж▓ рждрзИрж░рж┐ (ржкрзНрж░рждрж┐ржЯрж┐ ржоржбрзЗрж▓рзЗрж░ fillable ржкрж░рж┐ржмрж░рзНрждржи рж▓ржЧ ржХрж░рж╛ рж╣ржпрж╝)редуАРF:app/Traits/LogsActivityChanges.phpтАаL1-L16уАС
- Double-entry рж▓рзЗржЬрж╛рж░ ржкрзЛрж╕рзНржЯрж┐ржВ рж╕ржмрж╕ржоржпрж╝ ржмрзНржпрж╛рж▓рзЗржирзНрж╕ржб рж╣рждрзЗ рж╣ржмрзЗ; ржмрзНржпрж╛рж▓рзЗржирзНрж╕ ржирж╛ рж╣рж▓рзЗ InvalidArgumentException ржирж┐ржХрзНрж╖рж┐ржкрзНржд рж╣ржпрж╝редуАРF:app/Services/Accounting/LedgerService.phpтАаL1-L44уАС

### 2.6 ржЕржирзБржорж╛ржи ржУ ржирж┐рж░рзНржнрж░рждрж╛
- рж╕ржорж╕рзНржд ржЗржорзЗржЗрж▓/SMS ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи Laravel Notification рж╕рж┐рж╕рзНржЯрзЗржо ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗредуАРF:app/Notifications/OtpNotification.phpтАаL1-L39уАС
- Swagger ржбржХрзБржорзЗржирзНржЯрзЗрж╢ржи `php artisan l5-swagger:generate` ржХржорж╛ржирзНржбрзЗ ржЖржкржбрзЗржЯ рж╣ржпрж╝редуАРF:README.mdтАаL55-L69уАС

## 3. рж╕рж┐рж╕рзНржЯрзЗржо ржлрж┐ржЪрж╛рж░ ржУ ржлрж╛ржВрж╢ржирж╛рж▓ рж░рж┐ржХрзЛржпрж╝рж╛рж░ржорзЗржирзНржЯ
### 3.1 ржЕржерзЗржиржЯрж┐ржХрзЗрж╢ржи ржУ ржЕржерж░рж╛ржЗржЬрзЗрж╢ржи
1. ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА рж░рзЗржЬрж┐рж╕рзНржЯрзНрж░рзЗрж╢ржи ржУ рж▓ржЧржЗржи API ржЙржкрж▓ржмрзНржз; рж╕рж╛ржлрж▓рзНржпрзЗрж░ ржкрж░ Sanctum ржЯрзЛржХрзЗржи ржкрзНрж░ржжрж╛ржи ржХрж░рж╛ рж╣ржпрж╝редуАРF:app/Http/Controllers/AuthController.phpтАаL13-L67уАС
2. Logout API ржмрж░рзНрждржорж╛ржи ржЯрзЛржХрзЗржи ржмрж╛рждрж┐рж▓ ржХрж░рзЗредуАРF:app/Http/Controllers/AuthController.phpтАаL69-L88уАС
3. ржХрж╛рж╕рзНржЯржорж╛рж░ржжрзЗрж░ ржЬржирзНржп ржЖрж▓рж╛ржжрж╛ рж░рзЗржЬрж┐рж╕рзНржЯрзНрж░рзЗрж╢ржи/рж▓ржЧржЗржи API рж░ржпрж╝рзЗржЫрзЗ ржПржмржВ рждрж╛рж░рж╛ рж╢рзБржзрзБржорж╛рждрзНрж░ ржирж┐ржЬрж╕рзНржм ржбрзЗржЯрж╛ ржжрзЗржЦрждрзЗ ржкрж╛рж░рзЗредуАРF:routes/api.phpтАаL20-L43уАС

### 3.2 ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ржУ рж░рзЛрж▓ ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛
1. Admin ржмрзНрж░рж╛ржЮрзНржЪ, ржПржЬрзЗржирзНржЯ, ржПржоржкрзНрж▓ржпрж╝рж┐ ржУ ржХрж╛рж╕рзНржЯржорж╛рж░ рждрзИрж░рж┐/рж╣рж╛рж▓ржирж╛ржЧрж╛ржж/ржорзБржЫрзЗ ржлрзЗрж▓рждрзЗ ржкрж╛рж░рзЗредуАРF:routes/api.phpтАаL45-L68уАС
2. AgentController ржирждрзБржи ржПржЬрзЗржирзНржЯ рждрзИрж░рж┐ ржХрж░рж╛рж░ рж╕ржоржпрж╝ рж╕ржВрж╢рзНрж▓рж┐рж╖рзНржЯ User рждрзИрж░рж┐, Spatie Role ржЕрзНржпрж╛рж╕рж╛ржЗржи ржПржмржВ ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржирзЛржЯрж┐ржлрж╛ржЗ ржХрж░рзЗредуАРF:app/Http/Controllers/AgentController.phpтАаL33-L103уАС
3. ржХрж╛рж╕рзНржЯржорж╛рж░ рждрж╛рж▓рж┐ржХрж╛ржпрж╝ Agent/Admin ржнрзВржорж┐ржХрж╛ржнрж┐рждрзНрждрж┐ржХ ржлрж┐рж▓рзНржЯрж╛рж░ ржкрзНрж░ржпрж╝рзЛржЧ рж╣ржпрж╝ ржПржмржВ ржПржЬрзЗржирзНржЯ рж╢рзБржзрзБржорж╛рждрзНрж░ ржирж┐ржЬрзЗрж░ ржХрзНрж░рзЗрждрж╛ ржжрзЗржЦрждрзЗ ржкрж╛рж░рзЗредуАРF:app/Http/Controllers/CustomerController.phpтАаL13-L96уАС

### 3.3 ржмрзНрж░рж╛ржЮрзНржЪ ржУ ржПржЬрзЗржирзНржЯ ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛
1. ржПржЬрзЗржирзНржЯ ржкрзНрж░рзЛржлрж╛ржЗрж▓рзЗ ржмрзНрж░рж╛ржЮрзНржЪ, ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА, ржмрж┐ржХрзНрж░ржпрж╝ рж╕ржВржЦрзНржпрж╛, рж░тАНрзНржпрж╛ржЩрзНржХ ржорзЗржорзНржмрж╛рж░рж╢рж┐ржк рж╕рж╣ рж╕ржорзНржкрж░рзНржХрж┐ржд рждржерзНржп рж▓рзЛржб ржХрж░рж╛ ржпрж╛ржпрж╝редуАРF:app/Http/Controllers/AgentController.phpтАаL23-L78уАС
2. ржПржЬрзЗржирзНржЯ ржорзБржЫрзЗ ржлрзЗрж▓рж╛рж░ ржЖржЧрзЗ рждрж╛рж░ ржХрзЛржи Sales Order ржерж╛ржХрж╛ ржпрж╛ржмрзЗ ржирж╛редуАРF:app/Http/Controllers/AgentController.phpтАаL117-L136уАС

### 3.4 ржПржоржкрзНрж▓ржпрж╝рж┐ ржУ рж░тАНрзНржпрж╛ржЩрзНржХ ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛
1. Employee ржоржбрзЗрж▓ ржкрзВрж░рзНржгрж╛ржЩрзНржЧ ржмрж╛ржпрж╝рзЛржбрж╛ржЯрж╛, ржарж┐ржХрж╛ржирж╛, ржлрзНржпрж╛ржорж┐рж▓рж┐ рждржерзНржп, рж╢рж┐ржХрзНрж╖рж╛ ржУ ржоржирзЛржирзАржд ржмрзНржпржХрзНрждрж┐рж░ рждржерзНржп рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзЗ ржПржмржВ ржбржХрзБржорзЗржирзНржЯ ржЖржкрж▓рзЛржб рж╕ржорж░рзНржержи ржХрж░рзЗредуАРF:app/Models/Employee.phpтАаL17-L97уАС
2. Rank ржУ RankRequirement ржоржбрзЗрж▓ ржирждрзБржи рж░тАНрзНржпрж╛ржЩрзНржХ ржХрзЛржб (ME тЖТ MO тЖТ MM тЖТ DGM тЖТ GM тЖТ PD тЖТ ED тЖТ DMD тЖТ DIR), рж╢рзЗржпрж╝рж╛рж░ ржнрж┐рждрзНрждрж┐ржХ ржкрзНрж░ржорзЛрж╢ржи рж╢рж░рзНржд ржУ ржбрж┐рж░рзЗржХрзНржЯ-рж░рж┐ржкрзЛрж░рзНржЯ ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝рждрж╛ ржзрж╛рж░ржг ржХрж░рзЗредуАРF:app/Models/Rank.phpтАаL1-L34уАСуАРF:app/Models/RankRequirement.phpтАаL1-L32уАСуАРF:database/seeders/CoreDataSeeder.phpтАаL79-L210уАС
3. `ranks:evaluate` ржХржорж╛ржирзНржб ржкрзНрж░рждрж┐ржЯрж┐ ржорж╛рж░рзНржХрзЗржЯрж┐ржВ ржХрж░рзНржорзАрж░ (source_me) ржмрж┐ржХрзНрж░ржпрж╝ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржХрж░рзЗ; ржмрзИржз рж╢рзЗржпрж╝рж╛рж░ рж╕ржВржЦрзНржпрж╛, рзк-ржорж╛рж╕ ржЙржЗржирзНржбрзЛ ржПржмржВ рж╕рж░рж╛рж╕рж░рж┐ ржЯрж┐ржо рж╢рж░рзНржд ржкрзВрж░ржг рж╣рж▓рзЗржЗ `employees.rank` ржЖржкржбрзЗржЯ ржХрж░рзЗредуАРF:app/Console/Kernel.phpтАаL11-L20уАСуАРF:app/Services/RankPromotionService.phpтАаL1-L120уАС

### 3.5 ржХрж╛рж╕рзНржЯржорж╛рж░ ржкрзЛрж░рзНржЯрж╛рж▓ ржХрж╛рж░рзНржпрж╛ржмрж▓рж┐
1. ржХрж╛рж╕рзНржЯржорж╛рж░рж░рж╛ ржкрзНрж░рзЛржлрж╛ржЗрж▓ ржжрзЗржЦрж╛рж░/ржЖржкржбрзЗржЯ ржХрж░рж╛рж░ рж╕рзБржмрж┐ржзрж╛ ржкрж╛ржпрж╝ ржПржмржВ ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рж▓рзЗ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ржнрж╛ржмрзЗ рж╣рзНржпрж╛рж╢ ржХрж░рж╛ рж╣ржпрж╝редуАРF:app/Http/Controllers/Customer/CustomerProfileController.phpтАаL8-L39уАСуАРF:app/Models/User.phpтАаL47-L55уАС
2. ржХрж╛рж╕рзНржЯржорж╛рж░ рж╕рзЗрж▓рж╕ ржЕрж░рзНржбрж╛рж░ ржУ ржХрж┐рж╕рзНрждрж┐рж░ рждрж╛рж▓рж┐ржХрж╛ ржжрзЗржЦрж╛рждрзЗ ржкрж╛рж░рзЗ, ржкрзНрж░рждрж┐ржЯрж┐ ржЕрж░рзНржбрж╛рж░рзЗ ржЖржЗржЯрзЗржо, ржкрзЗржорзЗржирзНржЯ ржУ ржЗржирж╕рзНржЯрж▓ржорзЗржирзНржЯ рж▓рзЛржб рж╣ржпрж╝редуАРF:app/Http/Controllers/Customer/CustomerSalesOrderController.phpтАаL10-L41уАСуАРF:app/Http/Controllers/Customer/CustomerInstallmentController.phpтАаL10-L23уАС
3. ржЕржирж▓рж╛ржЗржи ржкрзЗржорзЗржирзНржЯ ржЗржирж┐рж╢рж┐ржпрж╝рзЗржЯ ржХрж░рж▓рзЗ PaymentIntent рждрзИрж░рж┐ рж╣ржпрж╝ ржПржмржВ SSLCommerz рж░рж┐ржбрж╛ржЗрж░рзЗржХрзНржЯ рж▓рж┐ржВржХ ржкрзНрж░ржжрж╛ржи ржХрж░рзЗредуАРF:app/Http/Controllers/Customer/CustomerPaymentController.phpтАаL21-L76уАСуАРF:app/Services/Payments/SSLCommerzGateway.phpтАаL1-L41уАС
4. ржЧрзЗржЯржУржпрж╝рзЗ ржХрж▓ржмрзНржпрж╛ржХ ржкрзЗржорзЗржирзНржЯ ржпрж╛ржЪрж╛ржЗ ржХрж░рзЗ, ржкрзЗржорзЗржирзНржЯ рж░рзЗржХрж░рзНржб рждрзИрж░рж┐ ржХрж░рзЗ ржПржмржВ рж╕ржВрж╢рзНрж▓рж┐рж╖рзНржЯ ржЗржирж╕рзНржЯрж▓ржорзЗржирзНржЯрзЗ ржмрж░рж╛ржжрзНржж ржХрж░рзЗредуАРF:app/Http/Controllers/Customer/CustomerPaymentController.phpтАаL78-L170уАС

### 3.6 ржкрзНрж░рзЛржбрж╛ржХрзНржЯ, рж╕рж╛рж░рзНржнрж┐рж╕ ржУ рж╕рзНржЯржХ
1. ржкржгрзНржп ржУ рж╕рж╛рж░рзНржнрж┐рж╕ ржЖрж▓рж╛ржжрж╛ ржоржбрзЗрж▓/ржХржирзНржЯрзНрж░рзЛрж▓рж╛рж░рзЗ ржкрж░рж┐ржЪрж╛рж▓рж┐ржд рж╣ржпрж╝; ржкржгрзНржп рж╕рзНржЯржХ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ ржлрзНрж▓рзНржпрж╛ржЧ, рж╕рж░рзНржмржирж┐ржорзНржи рж╕рзНржЯржХ рж╕рждрж░рзНржХрждрж╛ ржУ рж╕рзНржЯржХ ржорзБржнржорзЗржирзНржЯ ржЗрждрж┐рж╣рж╛рж╕ ржмржЬрж╛ржпрж╝ рж░рж╛ржЦрзЗредуАРF:app/Models/Product.phpтАаL1-L47уАСуАРF:app/Models/StockMovement.phpтАаL1-L41уАС
2. рж╕рзНржЯржХ ржорзБржнржорзЗржирзНржЯ API ржЗржи/ржЖржЙржЯ, ржкрзНрж░рзЛржбрж╛ржХрзНржЯ ржУ рждрж╛рж░рж┐ржЦ ржлрж┐рж▓рзНржЯрж╛рж░рж╕рж╣ ржкрзЗржЬрж┐ржирзЗрж╢ржи рж╕рж╛ржкрзЛрж░рзНржЯ ржХрж░рзЗредуАРF:app/Http/Controllers/ReportController.phpтАаL146-L179уАС

### 3.7 ржмрж┐ржХрзНрж░ржпрж╝ ржЕрж░рзНржбрж╛рж░ ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛
1. SalesOrder ржоржбрзЗрж▓ Land/Share/Product/Service ржЯрж╛ржЗржк, ржбрж╛ржЙржи ржкрзЗржорзЗржирзНржЯ, ржЯрзЛржЯрж╛рж▓, ржХрзНрж░рж┐ржпрж╝рзЗржЯрж░ ржЯрж╛ржЗржк ржУ рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рзЗ ржПржмржВ ржЖржЗржЯрзЗржо, ржЗржирж╕рзНржЯрж▓ржорзЗржирзНржЯ, ржкрзЗржорзЗржирзНржЯ, ржХржорж┐рж╢ржи рж╕ржорзНржкрж░рзНржХ ржмржЬрж╛ржпрж╝ рж░рж╛ржЦрзЗредуАРF:app/Models/SalesOrder.phpтАаL1-L96уАС
2. SalesOrderController ржбрзЗржЯрж╛ ржпрж╛ржЪрж╛ржЗ ржХрж░рзЗ, ржПржЬрзЗржирзНржЯ-ржмрзНрж░рж╛ржЮрзНржЪ рж╕рж╛ржоржЮрзНржЬрж╕рзНржп ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗ, ржЖржЗржЯрзЗржо ржпрзЛржЧ ржХрж░рзЗ ржПржмржВ рж╕рзНржЯржХ рж╕рж┐ржЩрзНржХрзНрж░рзЛржирж╛ржЗржЬ ржХрж░рж╛рж░ рж╣рзБржХ ржЕржирзНрждрж░рзНржнрзБржХрзНржд ржХрж░рзЗржЫрзЗредуАРF:app/Http/Controllers/SalesOrderController.phpтАаL21-L123уАС
3. ржбрж╛ржЙржи ржкрзЗржорзЗржирзНржЯ ржЯрзЛржЯрж╛рж▓рзЗрж░ ржмрзЗрж╢рж┐ рж╣рж▓рзЗ ржнрзНржпрж╛рж▓рж┐ржбрзЗрж╢ржи рждрзНрж░рзБржЯрж┐ ржкрзНрж░ржжрж╛ржи ржХрж░рзЗредуАРF:app/Http/Controllers/SalesOrderController.phpтАаL73-L92уАС

ЁЯУЦ Sales Entry Responsibility & Commission Distribution Rules
1. Sales Entry Responsibility

- **Customer**: ржЧрзНрж░рж╛рж╣ржХрж░рж╛ ржУржпрж╝рзЗржм ржкрзЛрж░рзНржЯрж╛рж▓ ржерзЗржХрзЗ ржирж┐ржЬрзЗрж░рж╛ ржЕрж░рзНржбрж╛рж░ ржжрж┐рждрзЗ ржкрж╛рж░рзЗ ржЕржержмрж╛ ME ржПрж░ ржорж╛ржзрзНржпржорзЗ рж░рзЗржлрж╛рж░ рж╣ржпрж╝рзЗ ржЖрж╕рждрзЗ ржкрж╛рж░рзЗред
- **Agent**: ржПржЬрзЗржирзНржЯрж░рж╛ рж╢рзБржзрзБржорж╛рждрзНрж░ ржирж┐ржЬрзЗржжрзЗрж░ ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб ржерзЗржХрзЗ ржЕрж░рзНржбрж╛рж░ ржПржирзНржЯрзНрж░рж┐ ржХрж░рждрзЗ ржкрж╛рж░рзЗ; `agent_id` ржмрж╛ржзрзНржпрждрж╛ржорзВрж▓ржХ ржПржмржВ `source_me_id` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛ржмрзЗ ржирж╛ред ржПржЗ ржХрзНрж╖рзЗрждрзНрж░рзЗ ржХржорж┐рж╢ржи ржнрж╛ржЧ рж╣ржпрж╝ рж╢рзБржзрзБржорж╛рждрзНрж░ ржПржЬрзЗржирзНржЯ ржУ ржХрзЛржорзНржкрж╛ржирж┐рж░ ржоржзрзНржпрзЗред
- **Admin/Branch Admin**: ржкрзНрж░рж╢рж╛рж╕ржирж┐ржХ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАрж░рж╛ ржЕрж░рзНржбрж╛рж░ ржПржирзНржЯрзНрж░рж┐ ржХрж░рж▓рзЗ ржЕржмрж╢рзНржпржЗ `source_me_id` ржкрзНрж░ржжрж╛ржи ржХрж░ржмрзЗ, ржпрж╛рждрзЗ ржХрзЛржи ME/ржорж╛рж░рзНржХрзЗржЯрж┐ржВ ржЕржлрж┐рж╕рж╛рж░ ржЧрзНрж░рж╛рж╣ржХ ржПржирзЗржЫрзЗ рждрж╛ ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рж╛ ржпрж╛ржпрж╝ред ржХржорж┐рж╢ржи ржЧржгржирж╛ржпрж╝ ME рж░тАНрзНржпрж╛ржЩрзНржХ `< MO` рж╣рж▓рзЗ ржЕрж░рзНрже ржирж╛ ржкрзЗрж▓рзЗржУ рждрж╛ржжрзЗрж░ ржмрж┐ржХрзНрж░ржпрж╝ рж╕ржВржЦрзНржпрж╛ рж░тАНрзНржпрж╛ржЩрзНржХ ржорзВрж▓рзНржпрж╛ржпрж╝ржирзЗрж░ ржЬржирзНржп ржЧрзЛржирж╛ рж╣ржпрж╝ред
- **Marketing Executive (ME)**: ME рж╕рж░рж╛рж╕рж░рж┐ рж╕рж┐рж╕рзНржЯрзЗржорзЗ ржЕрж░рзНржбрж╛рж░ ржПржирзНржЯрзНрж░рж┐ ржХрж░рждрзЗ ржкрж╛рж░рзЗ ржирж╛; рждрж╛рж░рж╛ ржЧрзНрж░рж╛рж╣ржХ рж╕ржВржЧрзНрж░рж╣ ржХрж░рзЗ ржПржмржВ ржЕрж░рзНржбрж╛рж░рзЗ `source_me_id` рж╣рж┐рж╕рзЗржмрзЗ ржпрзБржХрзНржд рж╣ржпрж╝ред

2. Commission Distribution Logic

- **Step 1 тАУ Entry Type**: ржкрзЗржорзЗржирзНржЯ ржкрзНрж░рж╕рзЗрж╕рж┐ржВржпрж╝рзЗрж░ рж╕ржоржпрж╝ рж╕рж┐рж╕рзНржЯрзЗржо ржкрзНрж░ржержорзЗ ржжрзЗржЦрзЗ ржЕрж░рзНржбрж╛рж░ржЯрж┐ ржПржЬрзЗржирзНржЯ ржирж╛ржХрж┐ ржЕрзНржпрж╛ржбржорж┐ржи/ржмрзНрж░рж╛ржЮрзНржЪ ржЕрзНржпрж╛ржбржорж┐ржи ржПржирзНржЯрзНрж░рж┐ ржХрж░рзЗржЫрзЗред
- **Step 2 тАУ Agent Orders**: ржПржЬрзЗржирзНржЯ-ржПржирзНржЯрзНрж░рж┐ ржЕрж░рзНржбрж╛рж░рзЗрж░ ржЬржирзНржп ржХржорж┐рж╢ржиржпрзЛржЧрзНржп ржкрж░рж┐ржорж╛ржгрзЗрж░ ржЙржкрж░ рзл% (ржбрж╛ржЙржи ржкрзЗржорзЗржирзНржЯ/ржкрзНрж░рзЛржбрж╛ржХрзНржЯ) ржЕржержмрж╛ рзз% (ржЗржирж╕рзНржЯрж▓ржорзЗржирзНржЯ) рж╕рж░рж╛рж╕рж░рж┐ рж╕ржВрж╢рзНрж▓рж┐рж╖рзНржЯ ржПржЬрзЗржирзНржЯржХрзЗ ржжрзЗржУржпрж╝рж╛ рж╣ржпрж╝ред
- **Step 3 тАУ Admin/Branch Orders**: ржкрзНрж░рж╢рж╛рж╕ржирж┐ржХ ржЕрж░рзНржбрж╛рж░рзЗ `source_me` ржПрж░ ржмрж░рзНрждржорж╛ржи рж░тАНрзНржпрж╛ржЩрзНржХ ржпржжрж┐ MO ржмрж╛ рждрж╛рж░ ржЙржкрж░рзЗ рж╣ржпрж╝, рждрж╛рж╣рж▓рзЗ ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯ ржмрзЛржирж╛рж╕ ржЪрзЗржЗржи рж╕ржХрзНрж░рж┐ржпрж╝ рж╣ржпрж╝ред рж░тАНрзНржпрж╛ржЩрзНржХ ржнрж┐рждрзНрждрж┐ржХ ржорзЛржЯ рж╢рждрж╛ржВрж╢ (MO рззрзл%, MM рззрзо%, DGM рзирзл%, GM рзйрзж%) ржХрзНрж░ржорж╛ржирзБрж╕рж╛рж░рзЗ ржбрж┐ржлрж╛рж░рзЗржирзНрж╕ ржкржжрзНржзрждрж┐рждрзЗ ржнрж╛ржЧ рж╣ржпрж╝ред
- **Step 4 тАУ Branch/Agent Share**: ржкрзНрж░рж╢рж╛рж╕ржирж┐ржХ ржЕрж░рзНржбрж╛рж░рзЗрж░ ржХрзНрж╖рзЗрждрзНрж░рзЗ ржмрзНрж░рж╛ржЮрзНржЪ рзл%/рзз% ржХржорж┐рж╢ржи ржкрж╛ржпрж╝ ржПржмржВ ржпржжрж┐ ржЕрж░рзНржбрж╛рж░рзЗ ржПржЬрзЗржирзНржЯ ржЕрзНржпрж╛рж╕рж╛ржЗржи ржХрж░рж╛ ржерж╛ржХрзЗ рждрж╛рж╣рж▓рзЗ рж╕рзЗржЗ ржПржЬрзЗржирзНржЯржУ ржПржХржЗ рж╣рж╛рж░ ржкрж╛ржпрж╝ред
- **Step 5 тАУ Service Override**: ржЕрж░рзНржбрж╛рж░рзЗрж░ `sales_type` ржпржжрж┐ `service` рж╣ржпрж╝ рждржмрзЗ ржХрзЛржирзЛ ржорж╛рж▓рзНржЯрж┐-рж▓рзЗржнрзЗрж▓ ржмржгрзНржЯржи рж╣ржпрж╝ ржирж╛; рззрзл% ржХржорж┐рж╢ржи рж╕рж░рж╛рж╕рж░рж┐ ржмрж┐ржХрзНрж░ржпрж╝ржХрж╛рж░рзА (ржПржЬрзЗржирзНржЯ ржЕржержмрж╛ ржпрзЛржЧрзНржп `source_me`) ржХрзЗ ржжрзЗржУржпрж╝рж╛ рж╣ржпрж╝ред
- **Tracking & CCV**: рж╕ржм ржХржорж┐рж╢ржи `payment->commissionable_amount` (CCV) ржПрж░ ржЙржкрж░ ржнрж┐рждрзНрждрж┐ ржХрж░рзЗ рж╣рж┐рж╕рж╛ржм рж╣ржпрж╝ ржПржмржВ `meta` рждрзЗ ржкрзЗржорзЗржирзНржЯ ржЯрж╛ржЗржк, ржХрзНрж░рж┐ржпрж╝рзЗржЯрж░ рж░рзЛрж▓ ржУ `source_me_id` рж╕ржВрж░ржХрзНрж╖рж┐ржд ржерж╛ржХрзЗред

3. Additional Constraints

- ржкрзНрж░рждрж┐ржЯрж┐ рзк ржорж╛рж╕рзЗ ржЕржирзНрждржд рззржЯрж┐ рж╢рзЗржпрж╝рж╛рж░ ржмрж┐ржХрзНрж░рж┐ ржирж╛ ржХрж░рж▓рзЗ рж░тАНрзНржпрж╛ржЩрзНржХ ржзрж░рзЗ рж░рж╛ржЦрж╛ ржпрж╛ржпрж╝ ржирж╛; ржорзВрж▓рзНржпрж╛ржпрж╝ржирзЗ ржПржЗ рж╢рж░рзНржд ржпрж╛ржЪрж╛ржЗ ржХрж░рж╛ рж╣ржпрж╝ред
- рж╕рж╛рж░рзНржнрж┐рж╕-ржЯрж╛ржЗржк ржЕрж░рзНржбрж╛рж░рзЗ ржХрзЗржмрж▓ржорж╛рждрзНрж░ ржЗржирзНржЯрзНрж░рзЛржбрж┐ржЙрж╕рж╛рж░ ржХржорж┐рж╢ржи ржкрж╛ржпрж╝; рж▓рзНржпрж╛ржирзНржб/ржкрзНрж░рзЛржбрж╛ржХрзНржЯ/рж╢рзЗржпрж╝рж╛рж░ ржмрж┐ржХрзНрж░ржпрж╝рзЗ ржорж╛рж▓рзНржЯрж┐-рж▓рзЗржнрзЗрж▓ ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯ ржмрзЛржирж╛рж╕ ржкрзНрж░ржпрзЛржЬрзНржпред

3. Audit & Logs

ржкрзНрж░рждрж┐ржЯрж┐ Order ржПржирзНржЯрзНрж░рж┐рж░ ржЬржирзНржп ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд рждржерзНржп рж▓ржЧ рж╣ржмрзЗ:

Created By: Admin / Branch Admin / Agent / Customer

Source ME: ржХрж╛рж╕рзНржЯржорж╛рж░ ржЖржирж╛рж░ ржжрж╛ржпрж╝рж┐рждрзНржмржкрзНрж░рж╛ржкрзНржд ME

Timestamp & Role Context: ржХрзЗ ржХржЦржи ржПржмржВ ржХрзЛржи ржнрзВржорж┐ржХрж╛рзЯ ржПржирзНржЯрзНрж░рж┐ ржжрж┐рж▓

### 3.8 ржЗржирж╕рзНржЯрж▓ржорзЗржирзНржЯ ржУ ржкрзЗржорзЗржирзНржЯ ржмрж░рж╛ржжрзНржж
1. CustomerInstallment ржоржбрзЗрж▓ ржкрзНрж░рждрж┐ржЯрж┐ ржХрж┐рж╕рзНрждрж┐рж░ ржкрж░рж┐ржорж╛ржг, ржкрж░рж┐рж╢рзЛржзрж┐ржд ржЕржВрж╢ ржУ рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рзЗредуАРF:app/Models/CustomerInstallment.phpтАаL1-L33уАС
2. PaymentAllocation ржоржбрзЗрж▓ ржкрзЗржорзЗржирзНржЯржХрзЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржЗржирж╕рзНржЯрж▓ржорзЗржирзНржЯрзЗ ржмрж░рж╛ржжрзНржж ржХрж░рзЗ ржПржмржВ ржкрзЗржорзЗржирзНржЯ ржЧрзЗржЯржУржпрж╝рзЗ ржХрж▓ржмрзНржпрж╛ржХрзЗрж░ рж╕ржоржпрж╝ ржЖржВрж╢рж┐ржХ/ржкрзВрж░рзНржг ржкрж░рж┐рж╢рзЛржз рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржЖржкржбрзЗржЯ ржХрж░рзЗредуАРF:app/Http/Controllers/Customer/CustomerPaymentController.phpтАаL112-L156уАС

### 3.9 ржкрзЗржорзЗржирзНржЯ ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛
1. Payment ржоржбрзЗрж▓ ржбрж╛ржЙржи ржкрзЗржорзЗржирзНржЯ, ржЗржирж╕рзНржЯрж▓ржорзЗржирзНржЯ ржУ ржлрзБрж▓ ржкрзЗржорзЗржирзНржЯ ржЯрж╛ржЗржк рж╕ржорж░рзНржержи ржХрж░рзЗ ржПржмржВ ржХржорж┐рж╢ржи ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗрж╢ржирзЗрж░ ржЬржирзНржп ржХржорж┐рж╢ржирзЗржмрж▓ ржкрж░рж┐ржорж╛ржг ржирж┐рж░рзНржгржпрж╝ ржХрж░рзЗредуАРF:app/Models/Payment.phpтАаL1-L73уАС
2. ржкрзЗржорзЗржирзНржЯ рждрзИрж░рж┐ рж╣рж▓рзЗ PaymentRecorded ржЗржнрзЗржирзНржЯ ржЯрзНрж░рж┐ржЧрж╛рж░ рж╣ржпрж╝, ржпрж╛ рж▓рзЗржЬрж╛рж░ ржПржирзНржЯрзНрж░рж┐ ржУ ржХржорж┐рж╢ржи ржкрзНрж░рж╕рзЗрж╕рж┐ржВржпрж╝рзЗрж░ ржЬржирзНржп рж▓рж┐рж╕ржирж╛рж░ ржЪрж╛рж▓рзБ ржХрж░рзЗредуАРF:app/Models/Payment.phpтАаL61-L73уАСуАРF:app/Listeners/RecordPaymentLedgerEntry.phpтАаL1-L44уАСуАРF:app/Listeners/ProcessPaymentCommissions.phpтАаL1-L16уАС

### 3.10 ржХржорж┐рж╢ржи ржЗржЮрзНржЬрж┐ржи
1. `commission_settings` ржЯрзЗржмрж┐рж▓ ржУ API (`/v1/commission-settings`) ржерзЗржХрзЗ ржПржЬрзЗржирзНржЯ/ржмрзНрж░рж╛ржЮрзНржЪ рж╢рждрж╛ржВрж╢, ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯ ржмрзЛржирж╛рж╕ (MO/MM/DGM/GM), рж╢рзЗржпрж╝рж╛рж░ ржнрзНржпрж╛рж▓рзБ ржПржмржВ рж╕рж╛рж░рзНржнрж┐рж╕-рж╕рзЗрж▓рж╕ ржПржХржХ ржХржорж┐рж╢ржи ржкрж╛рж░рж╕рзЗржирзНржЯрзЗржЬ ржбрж╛ржЗржирж╛ржорж┐ржХржнрж╛ржмрзЗ ржХржиржлрж┐ржЧрж╛рж░ ржХрж░рж╛ ржпрж╛ржпрж╝редуАРF:database/migrations/2025_10_20_000000_create_commission_settings_table.phpтАаL1-L20уАСуАРF:app/Http/Controllers/CommissionSettingController.phpтАаL1-L62уАСуАРF:database/seeders/CoreDataSeeder.phpтАаL24-L118уАС
2. CommissionService рж╕рзЗрж▓рж╕ ржЕрж░рзНржбрж╛рж░рзЗрж░ ржкрзНрж░ржХрж╛рж░ ржУ ржПржирзНржЯрзНрж░рж┐ рж░рзЛрж▓ ржжрзЗржЦрзЗ ржХржорж┐рж╢ржи ржнрж╛ржЧ ржХрж░рзЗтАФржПржЬрзЗржирзНржЯ ржПржирзНржЯрзНрж░рж┐рждрзЗ рж╢рзБржзрзБржорж╛рждрзНрж░ ржПржЬрзЗржирзНржЯ, ржЕрзНржпрж╛ржбржорж┐ржи ржПржирзНржЯрзНрж░рж┐рждрзЗ ржмрзНрж░рж╛ржЮрзНржЪ + ржПржЬрзЗржирзНржЯ + рж░тАНрзНржпрж╛ржЩрзНржХ-ржЪрзЗржЗржи ржПржмржВ рж╕рж╛рж░рзНржнрж┐рж╕ рж╕рзЗрж▓рзЗ ржХрзЗржмрж▓ ржЗржирзНржЯрзНрж░рзЛржбрж┐ржЙрж╕рж╛рж░ржХрзЗ ржмрж░рж╛ржжрзНржж ржХрж░рзЗред рж╕ржм ржХржорж┐рж╢ржи ржбрж╛ржмрж▓ ржПржирзНржЯрзНрж░рж┐ рж▓рзЗржЬрж╛рж░рзЗ рж░рзЗржХрж░рзНржб рж╣ржпрж╝редуАРF:app/Services/CommissionService.phpтАаL1-L318уАС

### 3.11 ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯрж┐ржВ ржУ рж▓рзЗржЬрж╛рж░
1. LedgerService ржбрж╛ржмрж▓-ржПржирзНржЯрзНрж░рж┐ рж░рзЗржХрж░рзНржб ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗ ржПржмржВ ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ржнрж╛ржмрзЗ рждрзИрж░рж┐ ржХрж░рзЗредуАРF:app/Services/Accounting/LedgerService.phpтАаL1-L54уАС
2. ржХржиржлрж┐ржЧрзЗ Cash, Bank, Accounts Receivable, Commission Expense, Commission Payable ржПржмржВ Incentive Fund ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯ ржХрзЛржб рж╕ржВржЬрзНржЮрж╛ржпрж╝рж┐рждредуАРF:config/accounting.phpтАаL1-L27уАС
3. ржкрзНрж░рждрж┐ржЯрж┐ ржХржорж┐рж╢ржи ржмрж┐рждрж░ржгрзЗ CommissionService рж▓рзЗржЬрж╛рж░рзЗ ржмрзНржпржпрж╝ ржУ ржкрж╛ржУржирж╛ржжрж┐ ржПржирзНржЯрзНрж░рж┐ рж░рзЗржХрж░рзНржб ржХрж░рзЗредуАРF:app/Listeners/RecordPaymentLedgerEntry.phpтАаL1-L44уАСуАРF:app/Services/CommissionService.phpтАаL146-L220уАС

### 3.12 рж░рж┐ржкрзЛрж░рзНржЯрж┐ржВ ржУ ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб
1. Receivable, Payable, Commission, Rank Fund, Agent Performance ржУ Stock рж╕ржорзНржкрж░рзНржХрж┐ржд рж░рж┐ржкрзЛрж░рзНржЯ API ржЙржкрж▓ржмрзНржзредуАРF:app/Http/Controllers/ReportController.phpтАаL1-L179уАС
2. Dashboard рж╕рж╛рж░рж╛ржВрж╢рзЗ ржмрж┐ржХрзНрж░ржпрж╝, рж╕ржВржЧрзНрж░рж╣, ржкрж╛ржУржирж╛, ржХржорж┐рж╢ржи, рж░тАНрзНржпрж╛ржЩрзНржХ ржлрж╛ржирзНржб, рж╕рзНржЯржХ ржУ ржХрж╛рж╕рзНржЯржорж╛рж░ ржорзЗржЯрзНрж░рж┐ржХрзНрж╕ ржкрзНрж░ржжрж╛ржи ржХрж░рзЗ ржПржмржВ Agent ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАрж░ ржЬржирзНржп ржбрзЗржЯрж╛ ржлрж┐рж▓рзНржЯрж╛рж░ ржХрж░рзЗредуАРF:app/Http/Controllers/ReportController.phpтАаL59-L135уАС

### 3.13 ржбржХрзБржорзЗржирзНржЯ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ
1. DocumentController ржлрж╛ржЗрж▓ ржЖржкрж▓рзЛржб ржХрж░рж╛рж░ рж╕ржоржпрж╝ ржХрзНржпрж╛ржЯрж╛ржЧрж░рж┐ ржнрж┐рждрзНрждрж┐ржХ рж╕рзНржЯрзЛрж░рзЗржЬ, ржбрж┐рж╕рзНржХ ржирж┐рж░рзНржмрж╛ржЪржи ржПржмржВ ржЖржкрж▓рзЛржбрж╛рж░ ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рзЗредуАРF:app/Http/Controllers/DocumentController.phpтАаL1-L42уАС
2. Document ржоржбрзЗрж▓ ржЖржХрж╛рж░, MIME ржЯрж╛ржЗржк, ржкрж╛рже ржУ ржЖржкрж▓рзЛржбрж╛рж░рзЗрж░ рждржерзНржп рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзЗ ржПржмржВ ржпрзЗржХрзЛржи ржоржбрзЗрж▓рзЗрж░ рж╕рж╛ржерзЗ ржкрж▓рж┐ржорж░ржлрж┐ржХ рж╕ржорзНржкрж░рзНржХ рж╕рзНржерж╛ржкржи ржХрж░рзЗредуАРF:app/Models/Document.phpтАаL1-L40уАС

### 3.14 ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи ржУ рж╕рждрж░рзНржХрждрж╛
1. Agent ржУ Employee ржХрзНрж░рзЗржбрзЗржирж╢рж┐ржпрж╝рж╛рж▓ ржЗржорзЗржЗрж▓ ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи ржкрж╛ржарж╛ржирзЛ рж╣ржпрж╝редуАРF:app/Notifications/AgentCredentialNotification.phpтАаL1-L63уАС
2. OTP ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи ржЗржорзЗржЗрж▓ ржУ ржбрж╛ржЯрж╛ржмрзЗрж╕ ржЪрзНржпрж╛ржирзЗрж▓рзЗ ржкрж╛ржарж╛ржирзЛ рж╣ржпрж╝; рззрзж ржорж┐ржирж┐ржЯ ржорзЗржпрж╝рж╛ржжрзАредуАРF:app/Notifications/OtpNotification.phpтАаL1-L39уАС
3. Payment Reminder ржХрж┐рж╕рзНрждрж┐рж░ ржирж┐рж░рзНржзрж╛рж░рж┐ржд рждрж╛рж░рж┐ржЦрзЗрж░ ржкрзВрж░рзНржмрзЗ ржорзЗржЗрж▓ ржУ ржЗржи-ржЕрзНржпрж╛ржк ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи ржкрзНрж░рзЗрж░ржг ржХрж░рзЗредуАРF:app/Notifications/PaymentReminderNotification.phpтАаL1-L44уАС

### 3.15 ржЕржбрж┐ржЯ ржУ рж▓ржЧрж┐ржВ
Spatie Activitylog-ржПрж░ ржорж╛ржзрзНржпржорзЗ ржкрзНрж░рждрж┐ржЯрж┐ ржоржбрзЗрж▓рзЗрж░ fillable ржлрж┐рж▓рзНржб ржкрж░рж┐ржмрж░рзНрждржирзЗрж░ рж▓ржЧ `audit` рж▓ржЧржирзЗржорзЗ рж╕ржВрж░ржХрзНрж╖ржг рж╣ржпрж╝, ржпрж╛ ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ ржУ ржЕржбрж┐ржЯ ржЯрзНрж░рзЗржЗрж▓ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗредуАРF:app/Traits/LogsActivityChanges.phpтАаL1-L16уАС

## 4. ржбрзЗржЯрж╛ рж░рж┐ржХрзЛржпрж╝рж╛рж░ржорзЗржирзНржЯ
### 4.1 ржкрзНрж░ржзрж╛ржи ржПржирзНржЯрж┐ржЯрж┐ ржУ рж╕ржорзНржкрж░рзНржХ
- User тЖРтЖТ Agent/Employee (one-to-one)уАРF:app/Models/User.phpтАаL57-L64уАС
- Agent тЖРтЖТ SalesOrder/RankMembership (one-to-many)уАРF:app/Models/Agent.phpтАаL16-L40уАС
- SalesOrder тЖРтЖТ OrderItem/CustomerInstallment/Payment/Commission (one-to-many)уАРF:app/Models/SalesOrder.phpтАаL65-L96уАС
- Payment тЖРтЖТ Commission/PaymentAllocation (one-to-many)уАРF:app/Models/Payment.phpтАаL75-L86уАС
- LedgerAccount тЖРтЖТ LedgerEntry (one-to-many)уАРF:app/Models/LedgerAccount.phpтАаL1-L28уАСуАРF:app/Models/LedgerEntry.phpтАаL1-L33уАС

### 4.2 ржбрзЗржЯрж╛ ржнрзНржпрж╛рж▓рж┐ржбрзЗрж╢ржи ржирж┐ржпрж╝ржо
- ржЗржорзЗржЗрж▓ ржЗржЙржирж┐ржХ, ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржХржоржкржХрзНрж╖рзЗ рзо ржЕржХрзНрж╖рж░рзЗрж░ ржПржмржВ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ржнрж╛ржмрзЗ рж╣рзНржпрж╛рж╢ рж╣ржпрж╝редуАРF:app/Http/Controllers/AuthController.phpтАаL17-L45уАСуАРF:app/Models/User.phpтАаL47-L55уАС
- Sales Order рждрзИрж░рж┐/ржЖржкржбрзЗржЯрзЗрж░ рж╕ржоржпрж╝ ржмрзИржз ржмрзНрж░рж╛ржЮрзНржЪ, ржПржЬрзЗржирзНржЯ ржУ рж╕рзЛрж░рзНрж╕ ME ржЖржЗржбрж┐ ржкрзНрж░ржпрж╝рзЛржЬржи ржПржмржВ ржбрж╛ржЙржи ржкрзЗржорзЗржирзНржЯ ржЯрзЛржЯрж╛рж▓рзЗрж░ ржЪрзЗржпрж╝рзЗ ржмржбрж╝ рж╣рждрзЗ ржкрж╛рж░рзЗ ржирж╛редуАРF:app/Http/Controllers/SalesOrderController.phpтАаL32-L92уАС
- ржХрж╛рж╕рзНржЯржорж╛рж░ ржкрзЗржорзЗржирзНржЯ ржЗржирж┐рж╢рж┐ржпрж╝рзЗрж╢ржирзЗ ржкрж░рж┐ржорж╛ржг рж╢рзВржирзНржпрзЗрж░ ржмрзЗрж╢рж┐ рж╣рждрзЗ рж╣ржмрзЗ ржПржмржВ ржЗржирж╕рзНржЯрж▓ржорзЗржирзНржЯ ржЯрж╛ржЗржк рж╣рж▓рзЗ ржмрзИржз ржХрж┐рж╕рзНрждрж┐ ржЖржЗржбрж┐ ржжрж┐рждрзЗ рж╣ржмрзЗредуАРF:app/Http/Controllers/Customer/CustomerPaymentController.phpтАаL38-L86уАС

## 5. ржмрж╛рж╣рзНржпрж┐ржХ ржЗржирзНржЯрж╛рж░ржлрзЗрж╕ рж░рж┐ржХрзЛржпрж╝рж╛рж░ржорзЗржирзНржЯ
### 5.1 API ржЗржирзНржЯрж╛рж░ржлрзЗрж╕
- RESTful JSON API, рж╕ржм рж░рзЗрж╕ржкржирзНрж╕ JSON ржЕржмржЬрзЗржХрзНржЯ/ржХрж▓рзЗржХрж╢ржи рж╣рж┐рж╕рзЗржмрзЗ ржЖрж╕рзЗред
- Sanctum Bearer ржЯрзЛржХрзЗржи рж╣рзЗржбрж╛рж░рзЗ ржжрж┐рждрзЗ рж╣ржмрзЗ (Authorization: Bearer {token})ред
- ржкрзЗржЬрж┐ржирзЗрж╢ржи ржбрж┐ржлрж▓рзНржЯ рззрзл ржЖржЗржЯрзЗржо ржПржмржВ `per_page` ржХрзБржЗрж░рж┐ ржкрзНржпрж╛рж░рж╛ржорж┐ржЯрж╛рж░рзЗ ржХрж╛рж╕рзНржЯржорж╛ржЗржЬржпрзЛржЧрзНржпредуАРF:app/Http/Controllers/AgentController.phpтАаL42-L65уАСуАРF:app/Http/Controllers/ReportController.phpтАаL162-L179уАС

### 5.2 рждрзГрждрзАржпрж╝ ржкржХрзНрж╖ ржЗржирзНржЯрж┐ржЧрзНрж░рзЗрж╢ржи
- SSLCommerz ржкрзЗржорзЗржирзНржЯ ржЧрзЗржЯржУржпрж╝рзЗ `services.sslcommerz` ржХржиржлрж┐ржЧ ржЕржирзБржпрж╛ржпрж╝рзА рж╕рзНржЯрзЛрж░ ржЖржЗржбрж┐/ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб, ржкрзЗржорзЗржирзНржЯ URL ржУ ржХрж╛рж░рзЗржирзНрж╕рж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗредуАРF:config/services.phpтАаL31-L45уАС
- AWS S3 рж╕рж╣ ржЕржирзНржпрж╛ржирзНржп рж╕рзНржЯрзЛрж░рзЗржЬ ржбрзНрж░рж╛ржЗржнрж╛рж░ `league/flysystem-aws-s3` ржПрж░ ржорж╛ржзрзНржпржорзЗ рж╕ржорж░рзНржерж┐рждредуАРF:composer.jsonтАаL8-L31уАС

### 5.3 ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи ржЪрзНржпрж╛ржирзЗрж▓
- ржЗржорзЗржЗрж▓ (MailMessage)
- ржбрж╛ржЯрж╛ржмрзЗрж╕ ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи (activity feed)
- ржнржмрж┐рж╖рзНржпрждрзЗ SMS ржЗржирзНржЯрж┐ржЧрзНрж░рзЗрж╢ржирзЗрж░ ржЬржирзНржп Notification via ржорзЗржержб рж╕ржорзНржкрзНрж░рж╕рж╛рж░ржгржпрзЛржЧрзНржпред

## 6. ржиржи-ржлрж╛ржВрж╢ржирж╛рж▓ рж░рж┐ржХрзЛржпрж╝рж╛рж░ржорзЗржирзНржЯ
### 6.1 рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐
- рж╕ржХрж▓ ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб рж╣рзНржпрж╛рж╢ржб ржлрж┐рж▓рзНржбрзЗ рж╕ржВрж░ржХрзНрж╖рж┐рждредуАРF:app/Models/User.phpтАаL47-L55уАС
- RBAC Spatie Permission ржжрзНржмрж╛рж░рж╛ ржирж┐ржпрж╝ржирзНрждрзНрж░рж┐ржд ржПржмржВ рж░рзЛрж▓ржнрж┐рждрзНрждрж┐ржХ ржорж┐ржбрж▓ржУржпрж╝рзНржпрж╛рж░ ржкрзНрж░ржпрж╝рзЛржЧ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ (ржпрзЗржоржи `role.customer`)редуАРF:routes/api.phpтАаL27-L43уАС
- ржбржХрзБржорзЗржирзНржЯ ржЖржкрж▓рзЛржбрзЗрж░ рж╕ржоржпрж╝ рж╢рзБржзрзБржорж╛рждрзНрж░ ржЕржерзЗржиржЯрж┐ржХрзЗржЯрзЗржб ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА `uploaded_by` рж╣рж┐рж╕рзЗржмрзЗ рж▓рж┐ржкрж┐ржмржжрзНржз рж╣ржпрж╝редуАРF:app/Http/Controllers/DocumentController.phpтАаL15-L42уАС

### 6.2 ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕
- ржмржбрж╝ ржбрзЗржЯрж╛рж╕рзЗржЯрзЗрж░ ржЬржирзНржп ржкрзЗржЬрж┐ржирзЗрж╢ржи ржбрж┐ржлрж▓рзНржЯ рззрзл ржЖржЗржЯрзЗржоред
- ржПржЬрзЗржирзНржЯ ржУ рж░рж┐ржкрзЛрж░рзНржЯ ржПржирзНржбржкржпрж╝рзЗржирзНржЯрзЗ ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ рж╕ржорзНржкрж░рзНржХ ржЗржЧрж╛рж░ рж▓рзЛржб ржХрж░рж╛ рж╣ржпрж╝ ржпрж╛рждрзЗ N+1 ржХрзЛржпрж╝рзЗрж░рж┐ ржХржорзЗредуАРF:app/Http/Controllers/AgentController.phpтАаL23-L78уАСуАРF:app/Http/Controllers/ReportController.phpтАаL10-L179уАС

### 6.3 рж╕рзНржХрзЗрж▓рзЗржмрж┐рж▓рж┐ржЯрж┐
- Queue ржУ Scheduler ржмрзНржпрж╛ржХржЧрзНрж░рж╛ржЙржирзНржб ржХрж╛ржЬ (OTP, ржкрзЗржорзЗржирзНржЯ рж░рж┐ржорж╛ржЗржирзНржбрж╛рж░, рж░тАНрзНржпрж╛ржЩрзНржХ ржорзВрж▓рзНржпрж╛ржпрж╝ржи) рж╕ржорж░рзНржержи ржХрж░рзЗ; Redis/Horizon ржмрзНржпржмрж╣рж╛рж░ рж╕рзБржкрж╛рж░рж┐рж╢ржХрзГрждредуАРF:README.mdтАаL21-L48уАС

### 6.4 рж░рж┐рж▓рж╛ржпрж╝рзЗржмрж┐рж▓рж┐ржЯрж┐
- рж▓рзЗржЬрж╛рж░ ржкрзЛрж╕рзНржЯрж┐ржВ рж╕ржмрж╕ржоржпрж╝ ржЯрзНрж░рж╛ржиржЬрзЗржХрж╢ржирж╛рж▓ ржмрзНрж▓ржХрзЗ рж╕ржорзНржкржирзНржи рж╣ржпрж╝ ржпрж╛рждрзЗ ржбрж╛ржЯрж╛ ржХржирж╕рж┐рж╕ржЯрзЗржирзНрж╕рж┐ ржмржЬрж╛ржпрж╝ ржерж╛ржХрзЗредуАРF:app/Services/Accounting/LedgerService.phpтАаL30-L44уАС
- ржХржорж┐рж╢ржи ржУ рж░тАНрзНржпрж╛ржЩрзНржХ ржкрзНрж░ржорзЛрж╢ржи ржкрзНрж░рж╕рзЗрж╕ ржбрж╛ржЯрж╛ржмрзЗржЬ ржЯрзНрж░рж╛ржиржЬрзЗржХрж╢ржирзЗрж░ ржоржзрзНржпрзЗ рж╕ржорзНржкрж╛ржжрж┐ржд рж╣ржпрж╝редуАРF:app/Services/CommissionService.phpтАаL37-L78уАСуАРF:app/Services/RankPromotionService.phpтАаL33-L90уАС

### 6.5 ржорзЗржЗржиржЯрзЗржЗржирзЗржмрж┐рж▓рж┐ржЯрж┐
- ржХрзЛржбржмрзЗрж╕ Laravel ржХржиржнрзЗржирж╢ржи ржорзЗржирзЗ ржХржирзНржЯрзНрж░рзЛрж▓рж╛рж░/ржоржбрзЗрж▓/рж░рж┐рж╕рзЛрж░рзНрж╕ рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗред
- Activity Log ржУ ржХржиржлрж┐ржЧ ржбрзНрж░рж╛ржЗржнрзЗржи ржХржорж┐рж╢ржи ржирж┐ржпрж╝ржо рж╕рж╣ржЬрзЗ рж╕ржорзНржкрзНрж░рж╕рж╛рж░ржгржпрзЛржЧрзНржпред

### 6.6 ржЗржЙржЬрзЗржмрж┐рж▓рж┐ржЯрж┐
- ржХрж╛рж╕рзНржЯржорж╛рж░ API ржЧрзБрж▓рж┐ ржлрзНрж░ржирзНржЯржПржирзНржбрзЗ ржЧрзНрж░рж╛рж╣ржХ ржЕржнрж┐ржЬрзНржЮрждрж╛ ржЙржирзНржиржд ржХрж░рждрзЗ рж╕рж╛ржЬрж╛ржирзЛ (ржкрзНрж░рзЛржлрж╛ржЗрж▓, ржЕрж░рзНржбрж╛рж░, ржкрзЗржорзЗржирзНржЯ ржЗрждрж┐рж╣рж╛рж╕)редуАРF:app/Http/Controllers/Customer/CustomerPaymentController.phpтАаL21-L170уАС

### 6.7 ржмрзНржпрж╛ржХржЖржк ржУ рж░рж┐ржХржнрж╛рж░рж┐
- README рждрзЗ ржбрж╛ржЯрж╛ржмрзЗрж╕ ржУ рж╕рзНржЯрзЛрж░рзЗржЬ ржмрзНржпрж╛ржХржЖржк ржХржиржлрж┐ржЧрж╛рж░ ржХрж░рж╛рж░ ржирж┐рж░рзНржжрзЗрж╢ржирж╛ рж░ржпрж╝рзЗржЫрзЗ ржПржмржВ ржмрзНржпрж╛ржХржЖржк ржбрж┐рж╕рзНржХ ржкрж░рж┐ржмрзЗрж╢ ржнрзЗрж░рж┐ржпрж╝рзЗржмрж▓ ржжрзНржмрж╛рж░рж╛ ржирж┐рж░рзНржзрж╛рж░рж┐рждредуАРF:README.mdтАаL49-L53уАС

## 7. ржЕржкрж╛рж░рзЗрж╢ржи ржУ ржбрзЗржкрзНрж▓ржпрж╝ржорзЗржирзНржЯ ржирж┐рж░рзНржжрзЗрж╢ржирж╛
1. `.env` ржХржиржлрж┐ржЧрж╛рж░ ржХрж░рж╛рж░ ржкрж░ `composer install`, `php artisan migrate`, `php artisan key:generate` ржЪрж╛рж▓рж╛рждрзЗ рж╣ржмрзЗредуАРF:README.mdтАаL21-L34уАС
2. ржбрзЗржн рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ ржЬржирзНржп `php artisan serve`, Queue ржкрзНрж░рж╕рзЗрж╕рзЗрж░ ржЬржирзНржп `php artisan horizon` ржЪрж╛рж▓рзБ рж░рж╛ржЦрждрзЗ рж╣ржмрзЗредуАРF:README.mdтАаL35-L48уАС
3. ржкрзНрж░рзЛржбрж╛ржХрж╢ржирзЗ ржХржиржлрж┐ржЧ ржУ рж░рзБржЯ ржХрзНржпрж╛рж╢, Horizon ржУ Scheduler рж╕ржХрзНрж░рж┐ржпрж╝ ржПржмржВ ржмрзНржпрж╛ржХржЖржк ржнрзЗрж░рж┐ржлрж╛ржЗ ржХрж░рждрзЗ рж╣ржмрзЗредуАРF:README.mdтАаL71-L94уАС

## 8. рж╕рзАржорж╛ржмржжрзНржзрждрж╛ ржУ ржнржмрж┐рж╖рзНржпрзО ржЙржирзНржиржпрж╝ржи
- InstallmentController ржП ржЬрзЗржирж╛рж░рзЗрж╢ржи рж▓ржЬрж┐ржХ ржПржЦржиржУ рж╕ржВржпрзЛржЬрж┐ржд рж╣ржпрж╝ржирж┐; ржнржмрж┐рж╖рзНржпрждрзЗ ржХрж┐рж╕рзНрждрж┐ рж╕ржоржпрж╝рж╕рзВржЪрж┐ ржЬрзЗржирж╛рж░рзЗрж╢ржирзЗрж░ API рж╕ржорзНржкрзВрж░рзНржг ржХрж░рждрзЗ рж╣ржмрзЗредуАРF:app/Http/Controllers/InstallmentController.phpтАаL1-L9уАС
- AI-ржЪрж╛рж▓рж┐ржд рж╕рзЗрж▓рж╕ рж░рзЗржХржорзЗржирзНржбрзЗрж╢ржи ржУ CRM ржЗржирзНржЯрж┐ржЧрзНрж░рзЗрж╢ржи ржнржмрж┐рж╖рзНржпрзО ржкрж░рж┐ржХрж▓рзНржкржирж╛рж░ ржЕржВрж╢ (README-рж░ ржкрзНрж░рж╕ржЩрзНржЧ)ред

